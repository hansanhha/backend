## 개요

**Amazon EC2**
- Elastic Computer Cloud
- Virtual Machine - EC2 Instance
- 컴퓨팅, 메모리, 네트워크 및 스토리지 리소스 제공(인스턴스 유형 별로 가격 및 성능 차이)

**기능**
- Instance: 가상 서버
- AMIs(Amazon Machine Images): 서버에 필요한 구성 요소(os, sw 등)를 패키징하는 인스턴스용 사전 구성 템플릿, Instance Family로 분류되며 패밀리 내에서 세부적인 타입 선택
- Instance Type: 인스턴스 CPU, 메모리, 스토리지, 네트워킹 용량 및 그래픽 하드웨어 구성
- Amazon EBS Volume: Amazon Elastic Block Store를 사용하는 데이터에 대한 영구 스토리지 볼륨
- Instance Store Volume: 인스턴스를 중단, 최대 절전 모드로 전환 또는 종료할 때 삭제되는 임시 데이터용 스토리지 볼륨
- Key pair: 인스턴스에 대한 로그인 정보(AWS - public key, User - private key)
- Security Group: 인스턴스에 도달할 수 있는 프로토콜, 포트 및 소스 IP 범위와 인스턴스가 연결할 수 있는 대상 IP 범위를 지정할 수 있는 가상 방화벽 

**요약**
- SW, OS -> AMI
- CPU, Memory, Network ->  Instance Type
- Storage -> EBS

**스토리지 처리량**
- EC2 인스턴스에서 사용할 수 있는 디스크 볼륨의 용량과 처리량(Thorughput), IOPS(Input/Output Per Seconds)
- 처리량: 초당 데이터 전송량
- IOPS: 초당 I/O 연산 수행 횟수
- 처리량 = IOPS * 연산당 데이터 전송 크기
    - 1000 * 4KB = 4MB/Seconds

## EC2

### EC2 Lifecycle

<img src="./images/ec2 lifecycle.png" alt="ec2 lifecycle.png">

running 상태 제외, 모든 상태 요금 부과 X

### EC2 EIP (Elastic IP)

EC2에는 두 가지 유형의 IP 주소가 있음

**EC2 기본 IP**
- Private IP
  - EC2가 시작될 때 자동 할당되는 IP 주소
  - VPC 내부 통신 용도 - 외부 접근 불가
  - 영속성 - 인스턴스 중지 후 다시 시작해도 동일한 Private IP 주소 유지
  - 무료
- Public IP
  - 인터넷을 통해 EC2에 접근할 수 있도록 할당되는 IP 주소
  - 인스턴스 중지 시 Public IP 주소 해지, 다시 시작하면 새로운 Public IP 주소 할당
  - 무료

**EC2 EIP**
- 고정된 Public IP 주소
- 필요에 따라 EC2에 연결/해제 가능
- 인스턴스를 중지, 재시작해도 Public IP 주소가 변경되지 않음
- EIP가 할당된 인스턴스의 장애 발생 시, 다른 인스턴스에 연결하여 지속적인 서비스 제공 가능
- 모든 Public IPv4 주소에 요금 부과 [자세한 내용](https://aws.amazon.com/ko/vpc/pricing/)

## VPC (Virtual Private Cloud)

사용자가 가상 네트워크 환경을 정의하고, 여기에 AWS 리소스를 배포하고 관리할 수 있게 하는 기능

네트워크 설정, 보안, 접근 제어를 포함한 다양한 네트워크 환경을 유연하게 구성

**VPC 가상 네트워크 환경**
- 논리적으로 격리된 네트워크
- IP 주소 범위, 서브넷, 라우팅 테이블, 인터넷 게이트웨이 등을 설정해서 VPC 구성
- 온프레미스 환경과 유사하게 동작하며, AWS 리소스 간의 통신을 제어하고 관리할 수 있음

### Subnet

네트워크를 작은 논리적 단위로 나누는 방법으로 전체 네트워크를 여러 개의 작은 서브 네트워크로 분할하는 기능

각 서브넷은 고유한 서브넷 마스크를 가지고 있고, 네트워크 주소와 호스트 주소로 나뉨

**서브넷 마스크**

네트워크 주소와 호스트 주소를 구분하는 데 사용됨

서브넷 마스크는 32비트 이진수로 표현됨 - 네트워크 부분은 1로, 호스트 부분은 0으로 표현

**서브넷 구성**

네트워크 주소: 서브넷 시작 주소 `192.168.1.0`

브로드캐스트 주소: 서브넷 마지막 주소 `192.168.1.255`

사용 가능한 IP 주소 범위: 네트워크 주소와 브로드캐스드 주소 사이 `192.168.1.1` - `192.168.1.254

**서브넷팅**

트래픽 분할: 네트워크 트래픽을 여러 세브넷으로 나눠 로컬 트래픽, 외부 트래픽으로 분리

### CIDR

**IPv4 구조**

32비트 구성, 4개의 옥텟으로 표현 `192.168.0.1`

**서브넷 마스크**

네트워크 부분과 호스트 부분을 구분하는 용도

`255.255.255.0` (또는 `/24`)
- 첫 24비트 - 네트워크 주소
- 나머지 8비트 - 호스트 주소

네트워크 주소: 네트워크의 식별자 `192.168.1.0`

호스트 주소: 네트워크 내에서 특정 장치를 식별 `192.168.1.1`

**CIDR (Classless Inter-Domain Routing)**

CIDR: IP 주소와 서브넷 마스크를 결합하여 네트워크를 표현하는 방식

표기법: `IP주소/Prefix 길이`
- 192.168.1.0/24
- /24: network prefix 길이, 첫 24비트가 네트워크 주소를 나타냄
- network prefix는 네트워크 부분으로 사용될 비트의 길이를 나타냄

**예시**

`192.168.0.0/16`
- 네트워크 주소: `192.168.0.0`
- 프리픽스 길이: 16
- 사용 가능한 IP 주소 범위: `192.168.0.0` - `192.168.255.255`
- 호스트 수: 2^(32-16) -2 = 65,534

`192.168.1.0/24`
- 네트워크 주소: `192.168.1.0`
- 프리픽스 길이: 24
- 사용 가능한 IP 주소 범위: `192.168.1.0` - `192.168.1.255`
- 호스트 수: 2^(32-24) -2 = 254`

### Routing Table

라우팅 테이블은 네트워크 트래픽 경로를 정의함

각 서브넷은 하나의 라우팅 테이블과 연결되어 트래픽이 어디로 향하는 지 결정함

### IGW (Internet Gateway)

인터넷 게이트웨이는 VPC와 인터넷 간의 트래픽을 허용하는 논리적 연결

Public 서브넷에 있는 리소스가 인터넷과 통신할 수 있도록 설정됨

### NAT 게이트웨이, NAT 인스턴스

NAT(NetWork Address Translation) 게이트웨이/인스턴스는 Private 서브넷의 리소스가 인터넷에 접근할 수 있도록 하며, 그 반대로의 직접적인 접근은 차단

private 서브넷 ec2 -> NAT -> 인터넷: 접근

인터넷 -> NAT -> private 서브넷 ec2: 접근 불가

NAT 게이트웨이: 관리형 서비스

NAT 인스턴스: 사용자가 직접 설정하고 관리하는 EC2 인스턴스

### 보안 그룹, 네트워크 ACL

보안 그룹: VPC 내의 인스턴스에 대한 가상 방화벽, 인바운드 및 아운바운드 트래픽 제어

네트워크 ACL(Access Control List): 서브넷 수준에서 트래픽을 제어하는 방화벽, 인바운드 및 아운바운드 규칙을 각각 설정(상태 비저장형)

## IAM

## Route53
